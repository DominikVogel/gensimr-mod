<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Topic Coherence • gensimr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- theme --><meta name="theme-color" content="#2f2f2f">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="../sandstone.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<link href="../news-r.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Topic Coherence">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">gensimr</a>
        <sup class="by">by <a href="https://news-r.org" target="_blank">news-r</a></sup><div class="info">
          <span class="version version-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-left">
<li>
  <a href="../reference/">Reference</a>
</li>
<li>
  <a href="../articles/installation.html">Installation</a>
</li>
<li>
  <a href="../articles/preprocessing.html">Parsing</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Modeling
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/models.html">Topic Modeling</a>
    </li>
    <li>
      <a href="../articles/sklearn.html">Scikit-learn</a>
    </li>
    <li>
      <a href="../articles/summarization.html">summarization</a>
    </li>
    <li>
      <a href="../articles/word2vec.html">Word2vec</a>
    </li>
    <li>
      <a href="../articles/poincare.html">Poincaré Embeddings</a>
    </li>
    <li>
      <a href="../articles/similarity.html">Document similarity</a>
    </li>
    <li>
      <a href="../articles/coherence.html">Topic coherence</a>
    </li>
    <li>
      <a href="../articles/API.html">API</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../LICENSE.html">
    <span class="fa fa-balance-scale"></span>
     
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/news-r/gensimr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Topic Coherence</h1>
            
      
      
      <div class="hidden name"><code>coherence.Rmd</code></div>

    </div>

    
    
<p>This is a reproduction of the official tutorial on <a href="https://github.com/RaRe-Technologies/gensim/blob/develop/docs/notebooks/topic_coherence_tutorial.ipynb">Topic coherence</a>.</p>
<p>We will be using the <code>u_mass</code> and <code>c_v</code> coherence for two different LDA models: a “good” and a “bad” LDA model. The good LDA model will be trained over 50 iterations and the bad one for 1 iteration. Hence in theory, the good LDA model will be able come up with better or more human-understandable topics. Therefore the coherence measure output for the good LDA model should be more (better) than that for the bad LDA model. This is because, simply, the good LDA model usually comes up with better topics that are more human interpretable.</p>
<div id="preprocess" class="section level2">
<h2 class="hasAnchor">
<a href="#preprocess" class="anchor"></a>Preprocess</h2>
<p>As stated in table 2 from <a href="http://www.cs.bham.ac.uk/~pxt/IDA/lsa_ind.pdf">this paper</a>, this corpus essentially has two classes of documents. First five are about human-computer interaction and the other four are about graphs. We will be setting up two LDA models. One with 50 iterations of training and the other with just 1. Hence the one with 50 iterations (“better” model) should be able to capture this underlying pattern of the corpus better than the “bad” LDA model. Therefore, in theory, our topic coherence for the good LDA model should be greater than the one for the bad LDA model.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(gensimr)

<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(<span class="st">"corpus"</span>, <span class="dt">package =</span> <span class="st">"gensimr"</span>)

texts &lt;-<span class="st"> </span><span class="kw"><a href="../reference/prepare_documents.html">prepare_documents</a></span>(corpus)
<span class="co">#&gt; → Preprocessing 9 documents</span>
<span class="co">#&gt; ← 9 documents after perprocessing</span>
dictionary &lt;-<span class="st"> </span><span class="kw"><a href="../reference/corpora_dictionary.html">corpora_dictionary</a></span>(texts)
corpus &lt;-<span class="st"> </span><span class="kw"><a href="../reference/doc2bow.html">doc2bow</a></span>(dictionary, texts)</code></pre></div>
</div>
<div id="set-up-two-topic-models" class="section level2">
<h2 class="hasAnchor">
<a href="#set-up-two-topic-models" class="anchor"></a>Set up two topic models</h2>
<p>We’ll be setting up two different LDA Topic models. A good one and bad one. To build a “good” topic model, we’ll simply train it using more iterations than the bad one. Therefore the u_mass coherence should in theory be better for the good model than the bad one since it would be producing more “human-interpretable” topics.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">good_lda_model &lt;-<span class="st"> </span><span class="kw"><a href="../reference/model_lda.html">model_lda</a></span>(<span class="dt">corpus =</span> corpus, <span class="dt">id2word =</span> dictionary, <span class="dt">iterations =</span> 50L, <span class="dt">num_topics =</span> 2L)
bad_lda_model &lt;-<span class="st"> </span><span class="kw"><a href="../reference/model_lda.html">model_lda</a></span>(<span class="dt">corpus =</span> corpus, <span class="dt">id2word =</span> dictionary, <span class="dt">iterations =</span> 1L, <span class="dt">num_topics =</span> 10L)</code></pre></div>
</div>
<div id="interpreting-the-topics" class="section level2">
<h2 class="hasAnchor">
<a href="#interpreting-the-topics" class="anchor"></a>Interpreting the topics</h2>
<p>As we will see below using LDA visualization, the better model comes up with two topics composed of the following words:</p>
<p><strong>good_lda_model:</strong></p>
<ul>
<li>Topic 1: More weightage assigned to words such as “system”, “user”, “eps”, “interface” etc which captures the first set of documents.</li>
<li>Topic 2: More weightage assigned to words such as “graph”, “trees”, “survey” which captures the topic in the second set of documents.</li>
</ul>
<p><strong>bad_lda_model:</strong></p>
<ul>
<li>Topic 1: More weightage assigned to words such as “system”, “user”, “trees”, “graph” which doesn’t make the topic clear enough.</li>
<li>Topic 2: More weightage assigned to words such as “system”, “trees”, “graph”, “user” which is similar to the first topic. Hence both topics are not human-interpretable.</li>
</ul>
<p>Therefore, the topic coherence for the <code>good\_lda\_model</code> should be greater for this than the <code>bad\_lda\_model</code> since the topics it comes up with are more human-interpretable. We will see this using <code>u_mass</code> and <code>c_v</code> topic coherence measures.</p>
</div>
<div id="u_mass-coherence" class="section level2">
<h2 class="hasAnchor">
<a href="#u_mass-coherence" class="anchor"></a>U_Mass Coherence</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">good_cm &lt;-<span class="st"> </span><span class="kw"><a href="../reference/topics.html">model_coherence</a></span>(<span class="dt">model =</span> good_lda_model, <span class="dt">corpus =</span> corpus, <span class="dt">dictionary =</span> dictionary, <span class="dt">coherence =</span> <span class="st">'u_mass'</span>)
bad_cm &lt;-<span class="st"> </span><span class="kw"><a href="../reference/topics.html">model_coherence</a></span>(<span class="dt">model =</span> bad_lda_model, <span class="dt">corpus =</span> corpus, <span class="dt">dictionary =</span> dictionary, <span class="dt">coherence =</span> <span class="st">'u_mass'</span>)</code></pre></div>
</div>
<div id="visualise" class="section level2">
<h2 class="hasAnchor">
<a href="#visualise" class="anchor"></a>Visualise</h2>
<p>From the R console once can use the <code>plot</code> function to interactively open the visualisation.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vis &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ldavis.html">prepare_ldavis</a></span>(good_lda_model, corpus, dictionary)
<span class="co"># plot(vis)</span>
<span class="kw"><a href="../reference/ldavis_save.html">save_ldavis_html</a></span>(vis, <span class="st">"lda.html"</span>)
htmltools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/htmltools/topics/include">includeHTML</a></span>(<span class="st">"lda.html"</span>)</code></pre></div>

<link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/bmabey/pyLDAvis/files/ldavis.v1.0.0.css">
<div id="ldavis_el46821406363205749449922525002"></div>
<script type="text/javascript">

var ldavis_el46821406363205749449922525002_data = {"mdsDat": {"x": [0.018423432484269142, -0.018423432484269142], "y": [0.0, 0.0], "topics": [1, 2], "cluster": [1, 1], "Freq": [52.0648193359375, 47.935176849365234]}, "tinfo": {"Category": ["Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2"], "Freq": [2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 1.9037199020385742, 1.7788474559783936, 1.2468949556350708, 1.5467698574066162, 1.128772258758545, 1.0348931550979614, 1.0139009952545166, 0.9075708985328674, 0.8451859951019287, 0.5683536529541016, 1.6924355030059814, 1.3252116441726685, 1.2424565553665161, 1.1014081239700317, 1.073561429977417, 0.9490289092063904, 1.21000337600708, 0.7923372387886047, 0.9021462798118591, 0.7365009188652039], "Term": ["human", "trees", "interface", "graph", "time", "minors", "survey", "response", "user", "eps", "trees", "graph", "minors", "user", "eps", "response", "survey", "time", "interface", "human", "human", "interface", "time", "survey", "response", "eps", "user", "minors", "graph", "trees"], "Total": [2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.640220880508423, 2.6809937953948975, 2.0392322540283203, 2.7567732334136963, 2.07780122756958, 2.108454704284668, 2.115309238433838, 2.1500275135040283, 2.1703977584838867, 2.260789155960083, 2.260789155960083, 2.1703977584838867, 2.1500275135040283, 2.115309238433838, 2.108454704284668, 2.07780122756958, 2.7567732334136963, 2.0392322540283203, 2.6809937953948975, 2.640220880508423], "loglift": [10.0, 9.0, 8.0, 7.0, 6.0, 5.0, 4.0, 3.0, 2.0, 1.0, 0.3255999982357025, 0.24250000715255737, 0.1607999950647354, 0.07479999959468842, 0.042500000447034836, -0.05900000035762787, -0.08269999921321869, -0.20980000495910645, -0.2903999984264374, -0.7279999852180481, 0.4458000063896179, 0.24199999868869781, 0.18690000474452972, 0.08269999921321869, 0.06030000001192093, -0.04830000177025795, -0.08810000121593475, -0.20999999344348907, -0.3537999987602234, -0.5414000153541565], "logprob": [10.0, 9.0, 8.0, 7.0, 6.0, 5.0, 4.0, 3.0, 2.0, 1.0, -1.8389999866485596, -1.9068000316619873, -2.262200117111206, -2.046600103378296, -2.3617000579833984, -2.448499917984009, -2.4690001010894775, -2.5797998905181885, -2.6510000228881836, -3.047800064086914, -1.8739999532699585, -2.1185998916625977, -2.1830999851226807, -2.3036000728607178, -2.329200029373169, -2.452500104904175, -2.2095999717712402, -2.6328999996185303, -2.503200054168701, -2.7060000896453857]}, "token.table": {"Topic": [1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2], "Freq": [0.4812780022621155, 0.4812780022621155, 0.7459920048713684, 0.3729960024356842, 0.4423234164714813, 0.8846468329429626, 0.46074503660202026, 0.46074503660202026, 0.4903806447982788, 0.4903806447982788, 0.47428098320961, 0.47428098320961, 0.4727441072463989, 0.4727441072463989, 0.46511033177375793, 0.46511033177375793, 0.7575123906135559, 0.37875619530677795, 0.7254858613014221, 0.36274293065071106], "Term": ["eps", "eps", "graph", "graph", "human", "human", "interface", "interface", "minors", "minors", "response", "response", "survey", "survey", "time", "time", "trees", "trees", "user", "user"]}, "R": 10, "lambda.step": 0.01, "plot.opts": {"xlab": "PC1", "ylab": "PC2"}, "topic.order": [1, 2]};

function LDAvis_load_lib(url, callback){
  var s = document.createElement('script');
  s.src = url;
  s.async = true;
  s.onreadystatechange = s.onload = callback;
  s.onerror = function(){console.warn("failed to load library " + url);};
  document.getElementsByTagName("head")[0].appendChild(s);
}

if(typeof(LDAvis) !== "undefined"){
   // already loaded: just create the visualization
   !function(LDAvis){
       new LDAvis("#" + "ldavis_el46821406363205749449922525002", ldavis_el46821406363205749449922525002_data);
   }(LDAvis);
}else if(typeof define === "function" && define.amd){
   // require.js is available: use it to load d3/LDAvis
   require.config({paths: {d3: "https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min"}});
   require(["d3"], function(d3){
      window.d3 = d3;
      LDAvis_load_lib("https://cdn.rawgit.com/bmabey/pyLDAvis/files/ldavis.v1.0.0.js", function(){
        new LDAvis("#" + "ldavis_el46821406363205749449922525002", ldavis_el46821406363205749449922525002_data);
      });
    });
}else{
    // require.js not available: dynamically load d3 & LDAvis
    LDAvis_load_lib("https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js", function(){
         LDAvis_load_lib("https://cdn.rawgit.com/bmabey/pyLDAvis/files/ldavis.v1.0.0.js", function(){
                 new LDAvis("#" + "ldavis_el46821406363205749449922525002", ldavis_el46821406363205749449922525002_data);
            })
         });
}
</script><div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">good_cm<span class="op">$</span><span class="kw">get_coherence</span>()
<span class="co">#&gt; -14.673842117141104</span>
bad_cm<span class="op">$</span><span class="kw">get_coherence</span>()
<span class="co">#&gt; -14.70455917078566</span></code></pre></div>
</div>
<div id="using-c_v-coherence" class="section level2">
<h2 class="hasAnchor">
<a href="#using-c_v-coherence" class="anchor"></a>Using C_V coherence</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">good_cm &lt;-<span class="st"> </span><span class="kw"><a href="../reference/topics.html">model_coherence</a></span>(<span class="dt">model =</span> good_lda_model, <span class="dt">texts =</span> texts, <span class="dt">dictionary =</span> dictionary, <span class="dt">coherence =</span> <span class="st">'c_v'</span>)
bad_cm &lt;-<span class="st"> </span><span class="kw"><a href="../reference/topics.html">model_coherence</a></span>(<span class="dt">model =</span> bad_lda_model, <span class="dt">texts =</span> texts, <span class="dt">dictionary =</span> dictionary, <span class="dt">coherence =</span> <span class="st">'c_v'</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">good_cm<span class="op">$</span><span class="kw">get_coherence</span>()
<span class="co">#&gt; 0.3838413553737203</span>
bad_cm<span class="op">$</span><span class="kw">get_coherence</span>()
<span class="co">#&gt; 0.38384135537372027</span></code></pre></div>
</div>
<div id="conclusion" class="section level2">
<h2 class="hasAnchor">
<a href="#conclusion" class="anchor"></a>Conclusion</h2>
<p>Hence as we can see, the <code>u_mass</code> and <code>c_v</code> coherence for the good LDA model is much more (better) than that for the bad LDA model. This is because, simply, the good LDA model usually comes up with better topics that are more human interpretable. The <code>bad_lda_model</code> however fails to decipher between these two topics and comes up with topics which are not clear to a human. The <code>u_mass</code> and <code>c_v</code> topic coherences capture this wonderfully by giving the interpretability of these topics a number as we can see above. Hence this coherence measure can be used to compare difference topic models based on their human-interpretability.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#preprocess">Preprocess</a></li>
      <li><a href="#set-up-two-topic-models">Set up two topic models</a></li>
      <li><a href="#interpreting-the-topics">Interpreting the topics</a></li>
      <li><a href="#u_mass-coherence">U_Mass Coherence</a></li>
      <li><a href="#visualise">Visualise</a></li>
      <li><a href="#using-c_v-coherence">Using C_V coherence</a></li>
      <li><a href="#conclusion">Conclusion</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://john-coene.com">John Coene</a> for <a href="https://news-r.org" target="_blank">news-r</a>.</p>
</div>

<a href="https://www.patreon.com/bePatron?u=21257335" data-patreon-widget-type="become-patron-button">Become a Patron!</a><script async src="https://c6.patreon.com/becomePatronButton.bundle.js"></script><div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
