<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Models • gensimr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- theme --><meta name="theme-color" content="#2f2f2f">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="../sandstone.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<link href="../news-r.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Models">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">gensimr</a>
        <sup class="by">by <a href="https://news-r.org" target="_blank">news-r</a></sup><div class="info">
          <span class="version version-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-left">
<li>
  <a href="../reference/">Reference</a>
</li>
<li>
  <a href="../articles/installation.html">Installation</a>
</li>
<li>
  <a href="../articles/preprocessing.html">Parsing</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Modeling
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/models.html">Topic Modeling</a>
    </li>
    <li>
      <a href="../articles/sklearn.html">Scikit-learn</a>
    </li>
    <li>
      <a href="../articles/summarization.html">summarization</a>
    </li>
    <li>
      <a href="../articles/word2vec.html">Word2vec</a>
    </li>
    <li>
      <a href="../articles/poincare.html">Poincaré Embeddings</a>
    </li>
    <li>
      <a href="../articles/similarity.html">Document similarity</a>
    </li>
    <li>
      <a href="../articles/hyperparameters.html">Hyperparameters</a>
    </li>
    <li>
      <a href="../articles/coherence.html">Topic coherence</a>
    </li>
    <li>
      <a href="../articles/API.html">API</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../LICENSE.html">
    <span class="fa fa-balance-scale"></span>
     
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/news-r/gensimr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Models</h1>
            
      
      
      <div class="hidden name"><code>models.Rmd</code></div>

    </div>

    
    
<div id="preprocessing" class="section level2">
<h2 class="hasAnchor">
<a href="#preprocessing" class="anchor"></a>Preprocessing</h2>
<p>First we preprocess the corpus using example data, a tiny corpus of 9 documents. Reproducing the tutorial on <a href="https://radimrehurek.com/gensim/tut1.html">corpora and vector spaces</a>.</p>
<pre class="sourceCode r" id="cb1"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(gensimr)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Random">set.seed</a></span>(<span class="dv">42</span>) <span class="co"># rerproducability</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="co"># sample data</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(corpus, <span class="dt">package =</span> <span class="st">"gensimr"</span>)</a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(corpus)</a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co">#&gt; [1] "Human machine interface for lab abc computer applications"    </span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="co">#&gt; [2] "A survey of user opinion of computer system response time"    </span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="co">#&gt; [3] "The EPS user interface management system"                     </span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="co">#&gt; [4] "System and human system engineering testing of EPS"           </span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="co">#&gt; [5] "Relation of user perceived response time to error measurement"</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="co">#&gt; [6] "The generation of random binary unordered trees"              </span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="co">#&gt; [7] "The intersection graph of paths in trees"                     </span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="co">#&gt; [8] "Graph minors IV Widths of trees and well quasi ordering"      </span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="co">#&gt; [9] "Graph minors A survey"</span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17"></a>
<a class="sourceLine" id="cb1-18" data-line-number="18"><span class="co"># preprocess corpus</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19">docs &lt;-<span class="st"> </span><span class="kw"><a href="../reference/prepare_documents.html">prepare_documents</a></span>(corpus)</a>
<a class="sourceLine" id="cb1-20" data-line-number="20"><span class="co">#&gt; → Preprocessing 9 documents</span></a>
<a class="sourceLine" id="cb1-21" data-line-number="21"><span class="co">#&gt; ← 9 documents after perprocessing</span></a>
<a class="sourceLine" id="cb1-22" data-line-number="22"></a>
<a class="sourceLine" id="cb1-23" data-line-number="23">docs[[<span class="dv">1</span>]] <span class="co"># print first preprocessed document </span></a>
<a class="sourceLine" id="cb1-24" data-line-number="24"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb1-25" data-line-number="25"><span class="co">#&gt; [1] "human"</span></a>
<a class="sourceLine" id="cb1-26" data-line-number="26"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-27" data-line-number="27"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb1-28" data-line-number="28"><span class="co">#&gt; [1] "interface"</span></a>
<a class="sourceLine" id="cb1-29" data-line-number="29"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-30" data-line-number="30"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb1-31" data-line-number="31"><span class="co">#&gt; [1] "computer"</span></a></code></pre>
<p>Once preprocessed we can build a dictionary.</p>
<pre class="sourceCode r" id="cb2"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">dictionary &lt;-<span class="st"> </span><span class="kw"><a href="../reference/corpora_dictionary.html">corpora_dictionary</a></span>(docs)</a></code></pre>
<p>A dictionary essentially assigns an integer to each term.</p>
<p><code>doc2bow</code> simply applies the method of the same name to every documents (see example below); it counts the number of occurrences of each distinct word, converts the word to its integer word id and returns the result as a sparse vector.</p>
<pre class="sourceCode r" id="cb3"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># native method to a single document</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">dictionary<span class="op">$</span><span class="kw"><a href="../reference/doc2bow.html">doc2bow</a></span>(docs[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt; [(0, 1), (1, 1), (2, 1)]</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co"># apply to all documents</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6">corpus_bow &lt;-<span class="st"> </span><span class="kw"><a href="../reference/doc2bow.html">doc2bow</a></span>(dictionary, docs)</a></code></pre>
<p>Then serialise to matrix market format, the function returns the path to the file (this is saved on disk for efficiency), if no path is passed then a temp file is created. Here we set <code>auto_delete</code> to <code>FALSE</code> otherwise the corpus is deleted after first use. Note this means you should manually delete it with <code>delete_mmcorpus</code>.</p>
<pre class="sourceCode r" id="cb4"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">(corpus_mm &lt;-<span class="st"> </span><span class="kw"><a href="../reference/mmcorpus_serialize.html">serialize_mmcorpus</a></span>(corpus_bow, <span class="dt">auto_delete =</span> <span class="ot">FALSE</span>))</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">#&gt; ℹ Path: /var/folders/n9/ys9t1h091jq80g4hww24v8g0n7v578/T//RtmpPPx5Ue/file24b0356abe1e.mm </span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">#&gt;  ✔ Temp file</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt;  ✖ Delete after use</span></a></code></pre>
<p>Then initialise a model, we’re going to use a Latent Similarity Indexing method later on (<code>model_lsi</code>) which requires td-idf.</p>
<pre class="sourceCode r" id="cb5"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">tfidf &lt;-<span class="st"> </span><span class="kw"><a href="../reference/model_tfidf.html">model_tfidf</a></span>(corpus_mm)</a></code></pre>
<p>We can then use the model to transform our original corpus.</p>
<pre class="sourceCode r" id="cb6"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">corpus_transformed &lt;-<span class="st"> </span><span class="kw"><a href="../reference/wrap.html">wrap</a></span>(tfidf, corpus_bow)</a></code></pre>
<p>Finally, we can build models, the number of topics of <code>model_*</code> functions defautls to 2, which is too low for what we generally would do with gensimr but works for the low number of documents we have. Below we reproduce bits and bobs of the <a href="https://radimrehurek.com/gensim/tut2.html">topics and transformation</a>.</p>
</div>
<div id="latent-similarity-index" class="section level2">
<h2 class="hasAnchor">
<a href="#latent-similarity-index" class="anchor"></a>Latent Similarity Index</h2>
<p>Note that we use the transformed corpus.</p>
<pre class="sourceCode r" id="cb7"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">lsi &lt;-<span class="st"> </span><span class="kw"><a href="../reference/model_lsi.html">model_lsi</a></span>(corpus_transformed, <span class="dt">id2word =</span> dictionary, <span class="dt">num_topics =</span> 2L)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">lsi<span class="op">$</span><span class="kw">print_topics</span>()</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co">#&gt; [(0, '0.703*"trees" + 0.538*"graph" + 0.402*"minors" + 0.187*"survey" + 0.061*"system" + 0.060*"time" + 0.060*"response" + 0.058*"user" + 0.049*"computer" + 0.035*"interface"'), (1, '-0.460*"system" + -0.373*"user" + -0.332*"eps" + -0.328*"interface" + -0.320*"response" + -0.320*"time" + -0.293*"computer" + -0.280*"human" + -0.171*"survey" + 0.161*"trees"')]</span></a></code></pre>
<p>We can then wrap the model around the corpus to extract further information, below we extract how each document contribute to each dimension (topic).</p>
<pre class="sourceCode r" id="cb8"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">wrapped_corpus &lt;-<span class="st"> </span><span class="kw"><a href="../reference/wrap.html">wrap</a></span>(lsi, corpus_transformed)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">(wrapped_corpus_docs &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_documents_topics.html">get_docs_topics</a></span>(wrapped_corpus))</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(wrapped_corpus_docs<span class="op">$</span>dimension_<span class="dv">1</span>_y, wrapped_corpus_docs<span class="op">$</span>dimension_<span class="dv">2</span>_y)</a></code></pre>
<pre><code>#&gt; # A tibble: 9 x 4
#&gt;   dimension_1_x dimension_1_y dimension_2_x dimension_2_y
#&gt;           &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;
#&gt; 1             0        0.0660             1       -0.520 
#&gt; 2             0        0.197              1       -0.761 
#&gt; 3             0        0.0899             1       -0.724 
#&gt; 4             0        0.0759             1       -0.632 
#&gt; 5             0        0.102              1       -0.574 
#&gt; 6             0        0.703              1        0.161 
#&gt; 7             0        0.877              1        0.168 
#&gt; 8             0        0.910              1        0.141 
#&gt; 9             0        0.617              1       -0.0539</code></pre>
<p><img src="models_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
</div>
<div id="random-projections" class="section level2">
<h2 class="hasAnchor">
<a href="#random-projections" class="anchor"></a>Random Projections</h2>
<p>Note that we use the transformed corpus.</p>
<pre class="sourceCode r" id="cb10"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">rp &lt;-<span class="st"> </span><span class="kw"><a href="../reference/model_rp.html">model_rp</a></span>(corpus_transformed, <span class="dt">id2word =</span> dictionary, <span class="dt">num_topics =</span> 2L)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"></a>
<a class="sourceLine" id="cb10-3" data-line-number="3">wrapped_corpus &lt;-<span class="st"> </span><span class="kw"><a href="../reference/wrap.html">wrap</a></span>(rp, corpus_transformed)</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">wrapped_corpus_docs &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_documents_topics.html">get_docs_topics</a></span>(wrapped_corpus)</a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(wrapped_corpus_docs<span class="op">$</span>dimension_<span class="dv">1</span>_y, wrapped_corpus_docs<span class="op">$</span>dimension_<span class="dv">2</span>_y)</a></code></pre>
<p><img src="models_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
</div>
<div id="latent-dirichlet-allocation" class="section level2">
<h2 class="hasAnchor">
<a href="#latent-dirichlet-allocation" class="anchor"></a>Latent Dirichlet Allocation</h2>
<p>Note that we use the original, non-transformed corpus.</p>
<pre class="sourceCode r" id="cb11"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">lda &lt;-<span class="st"> </span><span class="kw"><a href="../reference/model_lda.html">model_lda</a></span>(corpus_transformed, <span class="dt">id2word =</span> dictionary, <span class="dt">num_topics =</span> 2L)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2">lda_topics &lt;-<span class="st"> </span>lda<span class="op">$</span><span class="kw">get_document_topics</span>(corpus_bow)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3">wrapped_corpus_docs &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_documents_topics.html">get_docs_topics</a></span>(lda_topics)</a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(wrapped_corpus_docs<span class="op">$</span>dimension_<span class="dv">1</span>_y, wrapped_corpus_docs<span class="op">$</span>dimension_<span class="dv">2</span>_y)</a></code></pre>
<p><img src="models_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
</div>
<div id="hierarchical-dirichlet-process" class="section level2">
<h2 class="hasAnchor">
<a href="#hierarchical-dirichlet-process" class="anchor"></a>Hierarchical Dirichlet Process</h2>
<pre class="sourceCode r" id="cb12"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">hdp &lt;-<span class="st"> </span><span class="kw"><a href="../reference/model_hdp.html">model_hdp</a></span>(corpus_mm, <span class="dt">id2word =</span> dictionary)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">reticulate<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/reticulate/topics/r-py-conversion">py_to_r</a></span>(hdp<span class="op">$</span><span class="kw">show_topic</span>(<span class="dt">topic_id =</span> 1L, <span class="dt">topn =</span> 5L))</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co">#&gt; [[1]][[1]]</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="co">#&gt; [1] "computer"</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co">#&gt; [[1]][[2]]</span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="co">#&gt; [1] 0.2313531</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="co">#&gt; [[2]][[1]]</span></a>
<a class="sourceLine" id="cb12-13" data-line-number="13"><span class="co">#&gt; [1] "minors"</span></a>
<a class="sourceLine" id="cb12-14" data-line-number="14"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-15" data-line-number="15"><span class="co">#&gt; [[2]][[2]]</span></a>
<a class="sourceLine" id="cb12-16" data-line-number="16"><span class="co">#&gt; [1] 0.185554</span></a>
<a class="sourceLine" id="cb12-17" data-line-number="17"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-18" data-line-number="18"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-19" data-line-number="19"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb12-20" data-line-number="20"><span class="co">#&gt; [[3]][[1]]</span></a>
<a class="sourceLine" id="cb12-21" data-line-number="21"><span class="co">#&gt; [1] "human"</span></a>
<a class="sourceLine" id="cb12-22" data-line-number="22"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-23" data-line-number="23"><span class="co">#&gt; [[3]][[2]]</span></a>
<a class="sourceLine" id="cb12-24" data-line-number="24"><span class="co">#&gt; [1] 0.1340217</span></a>
<a class="sourceLine" id="cb12-25" data-line-number="25"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-26" data-line-number="26"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-27" data-line-number="27"><span class="co">#&gt; [[4]]</span></a>
<a class="sourceLine" id="cb12-28" data-line-number="28"><span class="co">#&gt; [[4]][[1]]</span></a>
<a class="sourceLine" id="cb12-29" data-line-number="29"><span class="co">#&gt; [1] "trees"</span></a>
<a class="sourceLine" id="cb12-30" data-line-number="30"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-31" data-line-number="31"><span class="co">#&gt; [[4]][[2]]</span></a>
<a class="sourceLine" id="cb12-32" data-line-number="32"><span class="co">#&gt; [1] 0.1336116</span></a>
<a class="sourceLine" id="cb12-33" data-line-number="33"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-34" data-line-number="34"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-35" data-line-number="35"><span class="co">#&gt; [[5]]</span></a>
<a class="sourceLine" id="cb12-36" data-line-number="36"><span class="co">#&gt; [[5]][[1]]</span></a>
<a class="sourceLine" id="cb12-37" data-line-number="37"><span class="co">#&gt; [1] "graph"</span></a>
<a class="sourceLine" id="cb12-38" data-line-number="38"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-39" data-line-number="39"><span class="co">#&gt; [[5]][[2]]</span></a>
<a class="sourceLine" id="cb12-40" data-line-number="40"><span class="co">#&gt; [1] 0.1041079</span></a></code></pre>
</div>
<div id="fasttext" class="section level2">
<h2 class="hasAnchor">
<a href="#fasttext" class="anchor"></a>Fasttext</h2>
<pre class="sourceCode r" id="cb13"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">ft &lt;-<span class="st"> </span><span class="kw"><a href="../reference/model_fasttext.html">model_fasttext</a></span>(<span class="dt">size =</span> 4L, <span class="dt">window =</span> 3L, <span class="dt">min_count =</span> 1L)</a>
<a class="sourceLine" id="cb13-2" data-line-number="2">ft<span class="op">$</span><span class="kw">build_vocab</span>(<span class="dt">sentences =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/unname">unname</a></span>(docs))</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="co">#&gt; None</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4">ft<span class="op">$</span><span class="kw">train</span>(<span class="dt">sentences =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/unname">unname</a></span>(docs), <span class="dt">total_examples =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(docs), <span class="dt">epochs =</span> 10L)</a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="co">#&gt; None</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="co"># most similar</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8">ft<span class="op">$</span>wv<span class="op">$</span><span class="kw">most_similar</span>(<span class="dt">positive =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">'computer'</span>, <span class="st">'human'</span>), <span class="dt">negative =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">'interface'</span>))</a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="co">#&gt; [('system', 0.41442763805389404), ('trees', 0.386058509349823), ('time', 0.22427979111671448), ('user', 0.1963859498500824), ('graph', 0.09310441464185715), ('survey', 0.07097837328910828), ('interface', -0.07697445154190063), ('minors', -0.21524256467819214), ('response', -0.39034441113471985), ('eps', -0.8746801614761353)]</span></a>
<a class="sourceLine" id="cb13-10" data-line-number="10"></a>
<a class="sourceLine" id="cb13-11" data-line-number="11"><span class="co"># odd one out</span></a>
<a class="sourceLine" id="cb13-12" data-line-number="12">ft<span class="op">$</span>wv<span class="op">$</span><span class="kw">doesnt_match</span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"human"</span>, <span class="st">"computer"</span>, <span class="st">"interface"</span>, <span class="st">"tree"</span>))</a>
<a class="sourceLine" id="cb13-13" data-line-number="13"><span class="co">#&gt; tree</span></a>
<a class="sourceLine" id="cb13-14" data-line-number="14"></a>
<a class="sourceLine" id="cb13-15" data-line-number="15"><span class="co"># similarity score</span></a>
<a class="sourceLine" id="cb13-16" data-line-number="16">ft<span class="op">$</span>wv<span class="op">$</span><span class="kw"><a href="../reference/similarity.html">similarity</a></span>(<span class="st">'computer'</span>, <span class="st">'human'</span>)</a>
<a class="sourceLine" id="cb13-17" data-line-number="17"><span class="co">#&gt; 0.80814165</span></a></code></pre>
</div>
<div id="author-topic-model" class="section level2">
<h2 class="hasAnchor">
<a href="#author-topic-model" class="anchor"></a>Author-topic model</h2>
<p>First we build the model.</p>
<pre class="sourceCode r" id="cb14"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="co"># authors of corpus</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(<span class="st">"authors"</span>, <span class="dt">package =</span> <span class="st">"gensimr"</span>)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"></a>
<a class="sourceLine" id="cb14-4" data-line-number="4">auth2doc &lt;-<span class="st"> </span><span class="kw"><a href="../reference/auth2doc.html">auth2doc</a></span>(authors, name, document)</a>
<a class="sourceLine" id="cb14-5" data-line-number="5"></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="co"># create temp to hold serialized data</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7">temp &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/tempfile">tempfile</a></span>(<span class="st">"serialized"</span>)</a>
<a class="sourceLine" id="cb14-8" data-line-number="8"></a>
<a class="sourceLine" id="cb14-9" data-line-number="9"><span class="co"># build model</span></a>
<a class="sourceLine" id="cb14-10" data-line-number="10">atmodel &lt;-<span class="st"> </span><span class="kw"><a href="../reference/model_at.html">model_at</a></span>(</a>
<a class="sourceLine" id="cb14-11" data-line-number="11">  corpus_mm, </a>
<a class="sourceLine" id="cb14-12" data-line-number="12">  <span class="dt">id2word =</span> dictionary, </a>
<a class="sourceLine" id="cb14-13" data-line-number="13">  <span class="dt">author2doc =</span> auth2doc, </a>
<a class="sourceLine" id="cb14-14" data-line-number="14">  <span class="dt">num_topics =</span> 2L, </a>
<a class="sourceLine" id="cb14-15" data-line-number="15">  <span class="dt">serialized =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb14-16" data-line-number="16">  <span class="dt">serialization_path =</span> temp</a>
<a class="sourceLine" id="cb14-17" data-line-number="17">)</a>
<a class="sourceLine" id="cb14-18" data-line-number="18"></a>
<a class="sourceLine" id="cb14-19" data-line-number="19"><span class="co"># delete temp</span></a>
<a class="sourceLine" id="cb14-20" data-line-number="20"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/unlink">unlink</a></span>(temp, <span class="dt">recursive =</span> <span class="ot">TRUE</span>)</a></code></pre>
<p>Then extract the topics for each author.</p>
<pre class="sourceCode r" id="cb15"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">atmodel<span class="op">$</span><span class="kw"><a href="../reference/get_author_topics.html">get_author_topics</a></span>(<span class="st">"jack"</span>) <span class="co"># native for single author </span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="co">#&gt; [(0, 0.9045919437303642), (1, 0.09540805626963585)]</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="co"># apply to all authors</span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="kw"><a href="../reference/get_author_topics.html">get_author_topics</a></span>(atmodel)</a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="co">#&gt; # A tibble: 3 x 5</span></a>
<a class="sourceLine" id="cb15-7" data-line-number="7"><span class="co">#&gt;   authors dimension_1_x dimension_1_y dimension_2_x dimension_2_y</span></a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="co">#&gt;   &lt;chr&gt;           &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb15-9" data-line-number="9"><span class="co">#&gt; 1 jack                0         0.905             1        0.0954</span></a>
<a class="sourceLine" id="cb15-10" data-line-number="10"><span class="co">#&gt; 2 jane                0         0.931             1        0.0690</span></a>
<a class="sourceLine" id="cb15-11" data-line-number="11"><span class="co">#&gt; 3 john                0         0.872             1        0.128</span></a></code></pre>
</div>
<div id="log-entropy" class="section level2">
<h2 class="hasAnchor">
<a href="#log-entropy" class="anchor"></a>Log Entropy</h2>
<pre class="sourceCode r" id="cb16"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">log_entropy &lt;-<span class="st"> </span><span class="kw"><a href="../reference/model_logentropy.html">model_logentropy</a></span>(corpus_bow)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="kw"><a href="../reference/wrap.html">wrap</a></span>(log_entropy, corpus_bow)</a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="co">#&gt; &lt;gensim.interfaces.TransformedCorpus&gt;</span></a></code></pre>
<p>Clean up, delete the corpus.</p>
<pre class="sourceCode r" id="cb17"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw"><a href="../reference/mmcorpus_serialize.html">delete_mmcorpus</a></span>(corpus_mm)</a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="co">#&gt; ✔ Temp unlinked</span></a></code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#preprocessing">Preprocessing</a></li>
      <li><a href="#latent-similarity-index">Latent Similarity Index</a></li>
      <li><a href="#random-projections">Random Projections</a></li>
      <li><a href="#latent-dirichlet-allocation">Latent Dirichlet Allocation</a></li>
      <li><a href="#hierarchical-dirichlet-process">Hierarchical Dirichlet Process</a></li>
      <li><a href="#fasttext">Fasttext</a></li>
      <li><a href="#author-topic-model">Author-topic model</a></li>
      <li><a href="#log-entropy">Log Entropy</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://john-coene.com">John Coene</a> for <a href="https://news-r.org" target="_blank">news-r</a>.</p>
</div>

<a href="https://www.patreon.com/bePatron?u=21257335" data-patreon-widget-type="become-patron-button">Become a Patron!</a><script async src="https://c6.patreon.com/becomePatronButton.bundle.js"></script><div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
